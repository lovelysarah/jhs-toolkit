// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

enum Category {
  GENERAL
  GARDENING
  HEAVY_EQUIPMENT
  TOOL
  WINTER
  SUMMER
}

enum ShedLocation {
  JOYCE
  FLANDERS
}

enum InventoryActionType {
  CHECK_IN
  CHECK_OUT
}

model ShedTransaction {
  id            String              @id @default(auto()) @map("_id") @db.ObjectId
  item_ids      String[]
  shed_location ShedLocation
  action_type   InventoryActionType
  note          String?
  created_at    DateTime            @default(now())
  display_name  String              
  user          User                @relation(fields: [user_id], references: [id])
  user_id       String              @db.ObjectId
}

model Item {
  id                  String       @id @default(auto()) @map("_id") @db.ObjectId
  shortId             String       @unique
  name                String       @unique
  location            ShedLocation
  quantity            Int          @default(1)
  category            Category
  note                String
  last_checked_out_by String
  last_checked_out_at DateTime     @default(now())
}

model User {
  id                String            @id @default(auto()) @map("_id") @db.ObjectId
  username          String            @unique
  password          String
  name              String
  account_type      ACCOUNT_TYPE
  shed_cart         String[]
  shed_checked_out  String[]
  shed_transactions ShedTransaction[]
  deleted_at        DateTime?
  version   Int    @default(0)
}

enum ACCOUNT_TYPE {
  ADMIN
  USER
  GUEST
}
